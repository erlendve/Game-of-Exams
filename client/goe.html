<head>
	<meta charset="utf-8">
	<title>Game of Exams {Alpha}</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="A POC of an exam game">
	<meta name="author" content="Erlend Vestad">

	<!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
      <![endif]-->

    <!-- Fav and touch icons -->
      <link rel="shortcut icon" href="../assets/ico/favicon.ico">
      <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/ico/apple-touch-icon-144-precomposed.png">
      <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/ico/apple-touch-icon-114-precomposed.png">
      <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/ico/apple-touch-icon-72-precomposed.png">
      <link rel="apple-touch-icon-precomposed" href="../assets/ico/apple-touch-icon-57-precomposed.png">
    </head>

<body>
  {{> page}}
</body>

<template name="page">
 {{> navbar}}
 <!-- if the user is logged in -->
 {{#if currentUser}}


 {{#if currentPage "examlist"}}
 {{> examlist}}
 {{/if}}


 {{#if currentPage "admin"}}
 {{> admin}}
 {{/if}}


 {{#if currentPage "exam"}}
 {{> player}}
 {{/if}}

 {{#if currentPage "feed"}}
 {{>  feed live}}
 {{/if}}

 {{#if currentPage "leaderboard"}}
 {{> leaderboard}}
 {{/if}}

 {{#if currentPage "profile"}}
 {{> profile}}
 {{/if}}

 {{else}}
 {{> not_logged_in}}
 {{/if}} <!-- /end if currentUser -->
 <hr>
 <footer class="footer">
   <div class="container"> 
     <p>&copy; Erlend Vestad 2012</p>
   </div>
 </footer>
</template>

<template name="navbar">
  <div class="navbar navbar-inverse navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container">
        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </a>
        <a class="brand" href="/main">Game of Exams <span id="alpha">{Alpha}</span></a>
          <p class="navbar-text pull-right">
            <a href="#" title="your total points" id="user_total_points" class="badge">{{myPoints}}</a> {{loginButtons align="right"}}
          </p>
        <div class="nav-collapse collapse">
          <ul class="nav">
            <!-- The following if blocks will set the active element -->
            <li {{#if currentPage "examlist"}} class="active" {{/if}}><a href="/courses" id="courses">All Exams</a></li>
       <!--      <li {{#if currentPage "exam"}} class="active" {{/if}}><a href="/exam" id="exam">Exam</a></li> -->
           <li {{#if currentPage "leaderboard"}} class="active" {{/if}}><a href="/leaderboard/#{{currentUser.username}}" id="leaderboard">Leaderboard</a></li>
            <li {{#if currentPage "feed"}} class="active" {{/if}}><a href="/feed" id="feed">Answer feed</a></li>
            <li {{#if currentPage "profile"}} class="active" {{/if}}><a href="/profile/{{currentUser.username}}" id="profile">My profile</a></li>
            {{#if isAdmin}}
            <li {{#if currentPage "admin"}} class="active" {{/if}}><a href="/admin" id="admin">Admin</a></li>
            {{/if}} <!--/end ifAdmin block -->
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </div>
  </div>
</template>

<template name="not_logged_in">
  <div class="alert alert-error alert-block">
    <button type="button" class="close" data-dismiss="alert">×</button>
    <h4>You are not logged in</h4>
    This content is only available to logged in users!
  </div>
</template>

<template name="feed">
  <div class="container">
    <div class="jumbotron subhead">
      <div class="page-header">
        <h1><span class="text-error">Live</span> feed of all answers<small> every new answer will show up here:</small></h1>
      </div>
      {{# each live}}
      <h3>Someone just solved <p class="text-info my-inline">{{findExercise.title}}</p> with the answer:</h3><br/>
      <div class="hl">
        <!-- The lines under here must be left aligned or else text will get spaces inserted :() -->
{{#markdown}}
{{answertext}}
{{/markdown}}
      </div>
    {{/each}}
    </div>
  </div> <!-- /end container -->
</template>

<template name="leaderboard">
  <header class="jumbotron subhead">
    <div class="page-header">
      <div class="container">
        <h1>Leaderboard</h1>
      </div>
    </div>
  </header> <!-- /end jumbotron -->
  <div class="container">
    <div class="row">
      <div class="span8">
        <div class="leaderboard">
          <table class="table lead">
            <thead>
              <tr>
                <th>#</th>
                <th>Username</th>
                <th style="text-align:center">Points</th>
                <th style="text-align:center">Exercises</th>
              </tr>
            </thead>
            <tbody>
              {{#each playerPoints}}
              <tr {{#if me}} class="info"{{/if}} id="{{username}}">
                <td>{{rank}}</td>
                <td>{{username}}</td>
                <td style="text-align:center">{{points}}</td>
                <td style="text-align:center">{{exercises_done}}</td>
              </tr>
              {{/each}}
            </tbody>
          </table>
        </div> <!-- /end leaderboard -->
      </div><!-- /end span -->
    </div> <!-- /end row  -->
    <a href="#Gurba" id ="scrollHelperHidden" class="hidden"></a>
  </div> <!-- /end container  -->
</template>

<template name="profile">
 <div class="jumbotron subhead">
  <div class="page-header">
    <div class="container">
    <h1>Username: <span class="text-info">{{currentUser.username}}</span>
    &nbsp&nbspTotal Points: <span class="text-info">{{myPoints}}</span></h1>
  </div>
  </div>
  <div class="container">
    {{#with achievements}}
    <h2>Points Achievements</h2>
    <img src="../{{15points.image}}">
    {{#if 15points.done}}
    <h3 class="my-inline">&nbsp&nbspGot 15 points!</h3>
    {{else}}
    <h3 class="muted my-inline">&nbsp&nbspGot 15 points!</h3>
    {{/if}}

    <br />
    <br />
    <img src="../{{50points.image}}">
    {{#if 50points.done}}
    <h3 class="my-inline">&nbsp&nbspGot 50 points!</h3>
    {{else}}
    <h3 class="muted my-inline">&nbsp&nbspGot 50 points!</h3>
    {{/if}}

    <br />
    <br />
    <hr>
    <h2>Exam achievements</h2>
    <img src="../{{one_exam.image}}">
    {{#if one_exam.done}}
    <h3 class="my-inline">&nbsp&nbspOne exam is easy!</h3>
    {{else}}
    <h3 class="muted my-inline">&nbsp&nbspOne exam is easy!</h3>
    {{/if}}

    <br />
    <br />
    <img src="../{{two_exam.image}}">
    {{#if two_exam.done}}
    <h3 class="my-inline">&nbsp&nbspThe real exam will be childsplay</h3>
    {{else}}
    <h3 class="muted my-inline">&nbsp&nbspThe real exam will be childsplay</h3>
    {{/if}}

    <br />
    <br />
    <img src="../{{three_exam.image}}">
    {{#if three_exam.done}}
    <h3 class="my-inline">&nbsp&nbspExams. I do them</h3>
    {{else}}
    <h3 class="muted my-inline">&nbsp&nbspExams. I do them</h3>
    {{/if}}

    <br />
    <br />
    <hr>
    <h1>Other achievements</h1>
    <img src="../{{corporate.image}}">
    {{#if corporate.done}}
    <h3 class="my-inline">&nbsp&nbspI spam my colleagues</h3>
    {{else}}
    <h3 class="muted my-inline">&nbsp&nbspI spam my colleagues</h3>
    {{/if}}

    <br />
    <br />
    <img src="../{{all_the_code.image}}">
    {{#if all_the_code.done}}
    <h3 class="my-inline">&nbsp&nbspDo all the exercises!</h3>
    {{else}}
    <h3 class="muted my-inline">&nbsp&nbspDo all the exercises!</h3>
    {{/if}}

    {{/with}}
  </div>
</template>