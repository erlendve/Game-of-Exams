<template name="player">
	{{#if currentExam}}
	{{#with currentExam}}
	<header class="jumbotron subhead">
		<div class="container">
			<h1>{{title}} <small>  You have {{examCurrentPoints}} of {{examTotalPoints}} points</small></h1>
			<p>{{description}}</p>
		</div>
	</header>
	<div class="container">
		<div class="row">
			<div class="span3 bs-docs-sidebar">
				<ul class="nav nav-list bs-docs-sidenav animate bounceInRight">
					<li class="nav-header">Exercises</li>
					{{#each exercises}}
					{{> exercise_sidenav}}
					{{/each}}
				</ul>
			</div><!--/span-->
			<div class="span9">
				<section class="exercises">
					{{#each exercises}}
					{{> exercise_main}}
					{{/each}}
				</section>

			</div><!--/.well -->
		</div><!--/row-->
		{{/with}}
		{{else}}
		<div class="container pagetop">
			<p class="lead">
				<i class="icon-spinner icon-2x icon-spin"></i>
				Loading content... (if it takes more than 5 seconds try to refresh site)
			</p>
		</div>
		{{/if}}
	</div>
</template>

<template name="exercise_sidenav">
	<li id="li_{{_id}}">
		<a href="#{{_id}}" class="exercise-side">
			<i class="icon-chevron-right"></i>
			{{#lettered letter}}&nbsp&nbsp{{letter}}{{else}}{{number}}{{letter}}{{/lettered}}) {{title}}
		</a>
	</li>
</template>

<template name="exercise_main">
</div>
<div id="{{_id}}" class="well exercise">
	<h3 class="title">{{number}}{{letter}}) {{title}} 
		{{#if answer.saved}}
		{{#if isRight}}
		(<span class="text-success">{{points}} points</span>)
		<small> answered <i class="icon-thumbs-up"></i></small>
		{{else}}
		(<span class="text-error">{{points}} points</span>)
		<small> Wrong answer <i class="icon-thumbs-down"></i></small>
		{{/if}}
		<!-- <i class="icon-ok"></i> -->
		{{else}}
		(<span class="text-error">{{points}} points</span>)
		<small><i class="icon-thumbs-down"></i> not answered</small>
		{{/if}}
	</h3>
	<div class="hl">{{#markdown}}{{text}}{{/markdown}}
	</div>
	<div class="answer-div">
		{{#ifwith answer}}
		{{#if saved}}
		<p class="lead text-info">Your answer</p>
		<pre><code>{{{answertext}}}</code></pre>
		<button type="button" class="btn-edit-answer btn btn-inverse pull-right"><i class="icon-edit"></i> Edit</button>
		{{else}}
		{{> form_answer}}
		{{#if loading}}
		<i class="icon-spinner icon-2x icon-spin"></i>
		{{status}}
		{{else}}
		{{#ifwith result}}
		{{> result}}
		{{/ifwith}}
		{{/if}}
		{{/if}} <!-- end if saved -->

		{{else}} <!-- else ifwith answer -->

		{{> form_answer}}
		{{/ifwith}} <!-- end ifwith answer -->
	</div>
</div>
</template>

<template name="result">
	<div class="answer-result">
		<h3 class="animated fadeInLeft">{{langName}} result:</h3>
		{{#if cmpinfo}}
		<pre class="animated shake"><i class="icon-warning-sign"> </i>Compilation error:<code class="no-highlight">{{cmpinfo}}</code></pre>
		{{/if}}
		{{#if output}}
		<pre class="animated pulse">Output:<code class="no-highlight">{{output}}</code></pre>
		{{/if}}
		{{#if stderr}}
		<pre class="animated wobble"><i class="icon-remove-sign icon-2x"> </i>Runtime error:<code class="no-highlight">{{stderr}}</code></pre>
		{{/if}}
		{{#if signal}}
		{{/if}}
	</div>
</template>

<template name="form_answer">
	<form name="answer" id="form_answer_{{_id}}">
		<label class="lead text-info"> Create answer:</label>
		{{#if currentUser}}

		<button type="button" class="btn-inverse editorbutton" data-toggle="collapse" data-target="#collapse{{_id}}">
			Editor
		</button>
		<div id="collapse{{_id}}" class="collapse in">
			<div id="editor{{_id}}" class="clickforeditor">{{answertext}}</div>
			<p class="buttonpanel">
				<button type="submit" class="btn btn-primary pull-right" id="btn-submit-answer-"><i class="icon-upload-alt"></i> Test</button>
				{{!<button type="submit" class="btn btn-danger pull-right" id="btn-reset-answer"><i class="icon-refresh"></i> Reset</button>!}}
				<button type="submit" class="btn btn-success pull-right" id="btn-run-answer"><i class="icon-play"></i> Run</button>
			</p>
		</div>
		<textarea name="answertext" class="hiddentextarea" id="answer{{_id}}" wrap="hard">{{answertext}}</textarea>

		{{else}}
		{{> not_logged_in}}
		{{/if}}
	</form>
</template>

<template name="examlist">
	<div class="container">
		{{#each courses}}
		<h3>{{title}}</h3>
		<ul>
			{{# each exams}}
			<li>
				<a href="exam/{{_id}}" id="{{_id}}" class="exam goe-navlink">{{title}} {{year}}</a>
			</li>
			{{/each}}
		</ul>
		{{/each}}
	</div>
</template>